<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>add cocktail</title>
<style>
:root {
  --bg: #0b0b0b;
  --panel: #141414;
  --border: #262626;
  --text: #f5f5f5;
  --muted: #a1a1a1;
  --highlight: #ffcc00;
}
* { box-sizing: border-box }
body { margin:0; padding:24px; background:var(--bg); color:var(--text); font-family:-apple-system,BlinkMacSystemFont,Inter,system-ui,sans-serif }
nav { display:flex; gap:16px; margin-bottom:32px }
nav a { color:var(--muted); text-decoration:none; font-size:14px }
nav a:hover { color:var(--text) }
h1{font-size:22px;font-weight:500;margin-bottom:24px}
label{font-size:12px;color:var(--muted);letter-spacing:0.06em;text-transform:uppercase}
input, textarea, select { width:100%; margin-top:6px; margin-bottom:20px; padding:10px; background:var(--panel); color:var(--text); border:1px solid var(--border); font-size:14px }
textarea { resize: vertical }
button { background:var(--text); color:var(--bg); border:none; padding:12px 18px; font-size:13px; letter-spacing:0.05em; cursor:pointer }
button:hover{opacity:0.9}
.card { border:1px solid var(--border); background:var(--panel); padding:12px; margin-bottom:12px; border-radius:6px }
.meta{font-size:12px;color:var(--muted);margin-bottom:4px}
.tags{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}
.tag{border:1px solid var(--border);padding:2px 6px;font-size:11px;color:var(--muted);cursor:pointer}
.tag:hover{color:var(--text)}
</style>
</head>
<body>
<nav>
  <a href="index.html">add</a>
  <a href="browse.html">browse</a>
</nav>

<h1>add cocktail</h1>

<label>name</label>
<input id="name" />

<label>recipe</label>
<textarea id="recipe"></textarea>

<label>ingredients (comma separated)</label>
<input id="ingredients" placeholder="e.g. gin, lime, sugar" list="ingredients-suggestions"/>
<datalist id="ingredients-suggestions"></datalist>

<label>method</label>
<select id="method">
  <option value="shaken">shaken</option>
  <option value="stirred">stirred</option>
  <option value="built">built</option>
  <option value="blended">blended</option>
  <option value="carbonated">carbonated</option>
</select>

<label>glassware</label>
<input id="glass" list="glass-suggestions"/>
<datalist id="glass-suggestions"></datalist>

<label>ice type</label>
<select id="ice">
  <option value="none">none</option>
  <option value="cube">cube</option>
  <option value="crushed">crushed</option>
  <option value="spear">spear</option>
  <option value="sphere">sphere</option>
</select>

<label>flavour profile (comma separated)</label>
<input id="flavour" placeholder="bitter, citrus, herbal" list="flavour-suggestions"/>
<datalist id="flavour-suggestions"></datalist>

<label>alcohol type</label>
<select id="alcohol">
  <option value="none">none</option>
  <option value="gin">gin</option>
  <option value="rum">rum</option>
  <option value="tequila">tequila</option>
  <option value="vodka">vodka</option>
  <option value="whiskey">whiskey</option>
  <option value="liqueur">liqueur</option>
</select>

<label>favourite?</label>
<input type="checkbox" id="favourite" />

<button onclick="saveDrink()">save cocktail</button>

<h2>existing cocktails preview</h2>
<div id="preview"></div>

<script>
const key='cocktails'

function getDrinks(){return JSON.parse(localStorage.getItem(key)||'[]')}

function updateSuggestions(){
  const drinks=getDrinks()
  const ingredientsSet=new Set()
  const flavoursSet=new Set()
  const glassSet=new Set()
  drinks.forEach(d=>{
    d.ingredients.forEach(i=>ingredientsSet.add(i))
    d.flavour.forEach(f=>flavoursSet.add(f))
    if(d.glass) glassSet.add(d.glass)
  })
  document.getElementById('ingredients-suggestions').innerHTML=Array.from(ingredientsSet).map(i=>`<option value="${i}">`).join('')
  document.getElementById('flavour-suggestions').innerHTML=Array.from(flavoursSet).map(f=>`<option value="${f}">`).join('')
  document.getElementById('glass-suggestions').innerHTML=Array.from(glassSet).map(g=>`<option value="${g}">`).join('')
}

function saveDrink(){
  const drink={
    name: document.getElementById('name').value.trim(),
    recipe: document.getElementById('recipe').value.trim(),
    ingredients: document.getElementById('ingredients').value.split(',').map(f=>f.trim().toLowerCase()).filter(Boolean),
    method: document.getElementById('method').value,
    glass: document.getElementById('glass').value.trim(),
    ice: document.getElementById('ice').value,
    flavour: document.getElementById('flavour').value.split(',').map(f=>f.trim().toLowerCase()).filter(Boolean),
    alcohol: document.getElementById('alcohol').value,
    favourite: document.getElementById('favourite').checked,
    date: new Date().toISOString()
  }
  if(!drink.name) return alert('name required')
  const drinks=getDrinks()
  drinks.push(drink)
  localStorage.setItem(key,JSON.stringify(drinks))
  alert('cocktail saved!')
  document.getElementById('name').value=''
  document.getElementById('recipe').value=''
  document.getElementById('ingredients').value=''
  document.getElementById('method').value='shaken'
  document.getElementById('glass').value=''
  document.getElementById('ice').value='none'
  document.getElementById('flavour').value=''
  document.getElementById('alcohol').value='none'
  document.getElementById('favourite').checked=false
  renderPreview()
  updateSuggestions()
}

function renderPreview(){
  const preview=document.getElementById('preview')
  preview.innerHTML=''
  getDrinks().slice(-5).reverse().forEach(d=>{
    const div=document.createElement('div')
    div.className='card'
    div.innerHTML=`<strong>${d.name}</strong> · ${d.method} · ${d.glass} · ${d.ice} · ${d.alcohol}${d.favourite?' ⭐':''}`
    preview.appendChild(div)
  })
}

updateSuggestions()
renderPreview()
</script>
</body>
</html>
